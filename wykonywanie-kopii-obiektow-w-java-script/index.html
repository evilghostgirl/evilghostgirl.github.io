<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" class="h-full" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D,%22class%22:%7B%22ssr%22:%22h-full%22%7D%7D">
  <head>
    <title>Autodydaktycznie. Blog o technologiach webowych i IT | Julia Glaszka</title><meta name="gridsome:hash" content="3eb23414f27c95c6f36b2e18d34903eefe912426"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.21"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" name="theme-color" content="#261447"><meta data-vue-tag="ssr" name="msapplication-navbutton-color" content="#261447"><meta data-vue-tag="ssr" name="apple-mobile-web-app-status-bar-style" content="#261447"><meta data-vue-tag="ssr" name="viewport" content="width=device-width"><meta data-vue-tag="ssr" data-key="description" name="description" content="Blog o moich samodzielnych zmaganiach z nauką z różnych dziedzin IT. "><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.34768914d4a101067dd64a8f857ab22c.png"><link data-vue-tag="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat|Work+Sans:700&amp;display=swap"><link rel="preload" href="/assets/css/0.styles.d5d76108.css" as="style"><link rel="preload" href="/assets/js/app.1910c616.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--post-vue.54468a1c.js" as="script"><link rel="prefetch" href="/assets/js/9.b470348d.js"><link rel="prefetch" href="/assets/js/page--src--pages--404-vue.bedab89a.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.2fe2f3a8.js"><link rel="prefetch" href="/assets/js/page--src--templates--author-vue.54a9d6b5.js"><link rel="prefetch" href="/assets/js/page--src--templates--tag-vue.16ee53e3.js"><link rel="prefetch" href="/assets/js/vendors~page--src--pages--index-vue~page--src--templates--author-vue~page--src--templates--post-vue~~a0fae544.6a932a98.js"><link rel="prefetch" href="/assets/js/vendors~page--src--templates--post-vue.91bc3a30.js"><link rel="stylesheet" href="/assets/css/0.styles.d5d76108.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body class="antialiased font-serif" data-vue-tag="%7B%22class%22:%7B%22ssr%22:%22antialiased%20font-serif%22%7D%7D">
    <div data-server-rendered="true" id="app" class="container-fluid "><nav class="navbar"><div class="navbar-brand container has-text-centered has-padding-bottom-10 has-padding-top-15"><a href="/" class="navbar-item has-text-weight-semibold has-text-black-bis	">Julia Glaszka</a></div></nav><header data-v-7271fefd><nav class="section p-b-xs p-t-md" data-v-7271fefd><div class="container"><a href="/" class="button is-outlined is-rounded is-small active">
      ← Powrót</a></div></nav><section class="hero" data-v-7271fefd><div class="hero-body" data-v-7271fefd><div class="container has-text-centered" data-v-7271fefd><div class="columns is-centered" data-v-7271fefd><div class="column is-half-desktop" data-v-7271fefd><h5 class="has-text-6 is-uppercase" data-v-7271fefd>
              3 min czytania
            </h5><h1 class="title is-size-2 p-t-md" data-v-7271fefd>
              Wykonywanie kopii obiektów w JavaScript
            </h1><h2 class="subtitle p-t-md" data-v-7271fefd><span data-v-7271fefd><a href="/author/Julia/" class="text-gray-700 capitalize border-b border-transparent hover:border-gray-400 transition-colors duration-300" data-v-7271fefd>
                  Julia</a> •
              </span><time datetime="2020-03-01 14:43:24" class="capitalize" data-v-7271fefd>01 March, 2020</time></h2></div></div></div></div></section><div class="section" data-v-7271fefd><div class="container" data-v-7271fefd><div class="columns is-centered" data-v-7271fefd><div class="column image-container" data-v-7271fefd><img src="/images/posts/kopie/cover.jpg" alt="Wykonywanie kopii obiektów w JavaScript" data-v-7271fefd></div></div></div></div></header><div class="section"><div class="columns is-centered"><div class="column is-two-thirds-tablet is-half-desktop"><!----><div class="content"><p>Kopiowanie to mechanizm tworzenia duplikatów. W przypadku prymitywów (string, number, boolean itd) sprawa jest prosta, możemy spokojnie wykonywać wszystkie operacje bez obaw o nadpisywanie oryginału. Sprawa się komplikuje przy zastosowaniu przypisania obiektu za pomocą prostego = - wtedy tworzy się referencja do oryginału. Kopia jest zależna od oryginału, więc każda modyfikacja w obiekcie oddziałuje na resztę obiektów. Czasami taki efekt nie jest pożądany, niestety w js brakuje natywnych, prostych sposobów na klonowanie obiektów bez tworzenia referencji (wskaźnika na oryginał), trzeba w tym celu wykorzystywać różne hacki. W tym artykule omówię część z nich, mam nadzieję że komuś się przydadzą.</p>
<h2 id="trochę-teorii">Trochę teorii</h2>
<p>Istnieją rodzaje kopiowania obiektów w js:</p>
<ul>
<li>Brak - referencja, wskazuje na adres obiektu macierzystego. Przy podmianie jakiejkolwiek wartości obiektu, zamieniają się one równocześnie w kopii i oryginale. Kopia jest silnie zależna od oryginału.</li>
<li>Płytkie (shallow) - otrzymujemy prostą kopię, która posiada jednopoziomową kopię, głębsze zagnieżdzenia są referencją do oryginału i przy podmianie wartości zmieni się również w innych obiektach.</li>
<li>Głębokie (deep) - kopie są identyczne, jednak niezależne od siebie. Obiekt jest autonomiczny, posiada wartości na własność, nic nie współdzieli - zmiana w oryginale nie zmieni kopii.</li>
</ul>
<h2 id="brak-kopii">Brak kopii</h2>
<p>Zacznijmy od tego, w jaki sposób nie skopiujemy obiektu, a który jednak początkowo wydaje się słusznym i prostym rozwiązaniem. Jak widać, przy podmianie wartości w klonie, wartość oryginału również się zmieniła, co nie jest oczekiwanym efektem.</p>
<pre class="shiki" style="background-color: #2e3440"><code><span style="color: #4C566A">// proste przypisanie  </span>
<span style="color: #81A1C1">var</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">truskawka</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span>
<span style="color: #D8DEE9FF">    </span><span style="color: #88C0D0">kolor</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">czerwony</span><span style="color: #ECEFF4">'</span><span style="color: #ECEFF4">,</span>
<span style="color: #D8DEE9FF">    </span><span style="color: #88C0D0">smak</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">słodki</span><span style="color: #ECEFF4">'</span><span style="color: #ECEFF4">,</span>
<span style="color: #D8DEE9FF">    </span><span style="color: #88C0D0">rozmiar</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">duży</span><span style="color: #ECEFF4">'</span><span style="color: #ECEFF4">,</span>
<span style="color: #D8DEE9FF">    </span><span style="color: #88C0D0">wymiary</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span>
<span style="color: #D8DEE9FF">        </span><span style="color: #88C0D0">x</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">10</span><span style="color: #ECEFF4">,</span>
<span style="color: #D8DEE9FF">        </span><span style="color: #88C0D0">y</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">32</span><span style="color: #ECEFF4">,</span>
<span style="color: #D8DEE9FF">        </span><span style="color: #88C0D0">z</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">33</span>
<span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">}</span>
<span style="color: #ECEFF4">}</span><span style="color: #81A1C1">;</span>
<span style="color: #81A1C1">var</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">poziomka</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">truskawka</span><span style="color: #81A1C1">;</span>
<span style="color: #D8DEE9">poziomka</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">rozmiar</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">mały</span><span style="color: #ECEFF4">'</span>
<span style="color: #8FBCBB">console</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">log</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">truskawka</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">rozmiar</span><span style="color: #D8DEE9FF">)</span><span style="color: #81A1C1">;</span><span style="color: #D8DEE9FF"> </span><span style="color: #4C566A">// mały</span></code></pre>
<h2 id="płytkie-kopie">Płytkie kopie</h2>
<p>Część funkcji dostarczonych natywnie przez JavaScript umożliwia płytkie skopiowanie obiektu. Dopóki zajmujemy się przestrzenią bez zagnieżdżeń, wszystko działa jak powinno. Problem pojawia się, gdy modyfikujemy zagnieżdżone obiekty - wtedy nadal możemy modyfikować oryginał, co nie jest pożądane (dzięki rekurencyjnemu użyciu płytkich kopii możemy jednak stworzyć głęboką kopię, czym zajmiemy się później). Poniżej natywny sposób na płytką kopię: </p>
<h3 id="objectassign">Object.assign()</h3>
<pre class="shiki" style="background-color: #2e3440"><code><span style="color: #4C566A">//Tworzy płytką kopię - klonuje właściwości najwyższego poziomu, pozostawiając referencję do zagnieżdzonych  </span>
<span style="color: #81A1C1">var</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">poziomka</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #8FBCBB">Object</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">assign</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">{},</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">truskawka</span><span style="color: #D8DEE9FF">)</span><span style="color: #81A1C1">;</span><span style="color: #D8DEE9FF">  </span>
<span style="color: #D8DEE9">poziomka</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">rozmiar</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">mały</span><span style="color: #ECEFF4">'</span><span style="color: #81A1C1">;</span><span style="color: #D8DEE9FF">  </span>
<span style="color: #8FBCBB">console</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">log</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">truskawka</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">rozmiar</span><span style="color: #D8DEE9FF">) </span><span style="color: #4C566A">// "duży"  </span>
<span style="color: #D8DEE9">poziomka</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">wymiary</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9FF">x </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">32</span><span style="color: #D8DEE9FF">  </span>
<span style="color: #8FBCBB">console</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">log</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">truskawka</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">wymiary</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9FF">x) </span><span style="color: #4C566A">//32, wartość jest podmieniona przez modyfikacje na poziomce!</span></code></pre>
<h3 id="spread-operator-es6">Spread operator ES6</h3>
<p>Standard ES6 przynosi nam proste ułatwienia, pozwalające na dokonywanie kopii. Jednym z nich jest spread operator (...), który płytko ignoruje wskaźnik do obiektu macierzystego. Dzięki temu otrzymujemy obiekty niezależne.</p>
<pre class="shiki" style="background-color: #2e3440"><code><span style="color: #81A1C1">var</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">truskawka</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span>
<span style="color: #D8DEE9FF">    </span><span style="color: #88C0D0">kolor</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">czerwony</span><span style="color: #ECEFF4">'</span><span style="color: #ECEFF4">,</span>
<span style="color: #D8DEE9FF">    </span><span style="color: #88C0D0">smak</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">słodki</span><span style="color: #ECEFF4">'</span><span style="color: #ECEFF4">,</span>
<span style="color: #D8DEE9FF">    </span><span style="color: #88C0D0">rozmiar</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">duży</span><span style="color: #ECEFF4">'</span><span style="color: #ECEFF4">,</span>
<span style="color: #D8DEE9FF">    </span><span style="color: #88C0D0">wymiary</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span>
<span style="color: #D8DEE9FF">        </span><span style="color: #88C0D0">x</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">10</span><span style="color: #ECEFF4">,</span>
<span style="color: #D8DEE9FF">        </span><span style="color: #88C0D0">y</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">32</span><span style="color: #ECEFF4">,</span>
<span style="color: #D8DEE9FF">        </span><span style="color: #88C0D0">z</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">33</span>
<span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">}</span>
<span style="color: #ECEFF4">}</span><span style="color: #81A1C1">;</span>
<span style="color: #81A1C1">const</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">poziomka</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span>
<span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">...</span><span style="color: #D8DEE9">truskawka</span>
<span style="color: #ECEFF4">}</span><span style="color: #81A1C1">;</span>
<span style="color: #D8DEE9">poziomka</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">rozmiar</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">mały</span><span style="color: #ECEFF4">'</span><span style="color: #81A1C1">;</span>
<span style="color: #8FBCBB">console</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">log</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">truskawka</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">rozmiar</span><span style="color: #D8DEE9FF">) </span><span style="color: #4C566A">// "duży", wszystko OK!  </span>
<span style="color: #D8DEE9">poziomka</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">wymiary</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9FF">x </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">32</span><span style="color: #81A1C1">;</span>
<span style="color: #8FBCBB">console</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">log</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">truskawka</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">wymiary</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9FF">x) </span><span style="color: #4C566A">//32, znowu podmienione przez poziomke :(</span></code></pre>
<h2 id="sposoby-na-głęboką-kopię">Sposoby na głęboką kopię</h2>
<h3 id="jsonparse-jsonstringify">JSON.parse(), JSON.stringify()</h3>
<p>Kiedy tworzymy klona, chcielibyśmy by był całkowicie niezależny referencyjnie od oryginału, a jednocześnie był identyczny jak on. Łatwo można to uzyskać za pomocą niezbyt eleganckiej sztuczki z JSONem. Metoda ta działa tylko z czystymi strukturami danych - obiekt w tym wypadku nie może zawierać funkcji. Osobiście nie stosowałabym tego sposobu - w przypadku gdy przy wstępnych założeniach obiekt jest zwykłą strukturą danych, a później nieświadomy inny programista dopisze do niego metody, pojawi się nieoczekiwany i problematyczny bug.</p>
<pre class="shiki" style="background-color: #2e3440"><code><span style="color: #81A1C1">var</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">truskawka</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span>
<span style="color: #D8DEE9FF">    </span><span style="color: #88C0D0">kolor</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">czerwony</span><span style="color: #ECEFF4">'</span><span style="color: #ECEFF4">,</span>
<span style="color: #D8DEE9FF">    </span><span style="color: #88C0D0">smak</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">słodki</span><span style="color: #ECEFF4">'</span><span style="color: #ECEFF4">,</span>
<span style="color: #D8DEE9FF">    </span><span style="color: #88C0D0">rozmiar</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">duży</span><span style="color: #ECEFF4">'</span><span style="color: #ECEFF4">,</span>
<span style="color: #D8DEE9FF">    </span><span style="color: #88C0D0">wymiary</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span>
<span style="color: #D8DEE9FF">        </span><span style="color: #88C0D0">x</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">10</span><span style="color: #ECEFF4">,</span>
<span style="color: #D8DEE9FF">        </span><span style="color: #88C0D0">y</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">32</span><span style="color: #ECEFF4">,</span>
<span style="color: #D8DEE9FF">        </span><span style="color: #88C0D0">z</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">33</span>
<span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">}</span>
<span style="color: #ECEFF4">}</span><span style="color: #81A1C1">;</span>
<span style="color: #81A1C1">const</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">poziomka</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">JSON</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">parse</span><span style="color: #D8DEE9FF">(</span><span style="color: #81A1C1">JSON</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">stringify</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">truskawka</span><span style="color: #D8DEE9FF">))</span><span style="color: #81A1C1">;</span>
<span style="color: #D8DEE9">poziomka</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">rozmiar</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">mały</span><span style="color: #ECEFF4">'</span><span style="color: #81A1C1">;</span>
<span style="color: #8FBCBB">console</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">log</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">truskawka</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">rozmiar</span><span style="color: #D8DEE9FF">) </span><span style="color: #4C566A">// "duży", wszystko OK!  </span>
<span style="color: #D8DEE9">poziomka</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">wymiary</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9FF">x </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">32</span><span style="color: #81A1C1">;</span>
<span style="color: #8FBCBB">console</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">log</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">truskawka</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">wymiary</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9FF">x) </span><span style="color: #4C566A">//10, wszystko OK!</span></code></pre>
<h3 id="customowa-funkcja-do-głębokiego-kopiowania">Customowa funkcja do głębokiego kopiowania</h3>
<p>Posiadamy już narzędzia do tworzenia płytkich kopii, możemy więc je wykorzystać przy tworzeniu głębokich kopii, wystarczy tylko wykorzystać rekurencję i posklejać to w jedno. Algorytm sprawdza czy przekazana w argumencie wartość - jeśli jest prymitywem, po prostu zwraca go. W przypadku gdy argument jest obiektem, przechodzimy po każdym jego polu i sprawdzamy czy jest ono typem prymitywnym, jeśli nie - wywołujemy funkcję dla pola nie-prymitywnego . Wszystko się powtarza do momentu, gdy algorytm przejdzie po całym drzewie.</p>
<pre class="shiki" style="background-color: #2e3440"><code><span style="color: #81A1C1">const</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">deepCopyFunc</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">child</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=&gt;</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span>
<span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">parent</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">value</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">key</span>
<span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">if</span><span style="color: #D8DEE9FF"> (</span><span style="color: #81A1C1">typeof</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">child</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">!==</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">object</span><span style="color: #ECEFF4">"</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">||</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">child</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">===</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">null</span><span style="color: #D8DEE9FF">) </span><span style="color: #ECEFF4">{</span>
<span style="color: #D8DEE9FF">        </span><span style="color: #81A1C1">return</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">child</span><span style="color: #D8DEE9FF"> </span><span style="color: #4C566A">// zwracamy jeśli jest typem prymitywnym  </span>
<span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">}</span>
<span style="color: #D8DEE9FF">    </span><span style="color: #D8DEE9">parent</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #8FBCBB">Array</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">isArray</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">child</span><span style="color: #D8DEE9FF">) </span><span style="color: #81A1C1">?</span><span style="color: #D8DEE9FF"> [] </span><span style="color: #81A1C1">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{}</span>

<span style="color: #ECEFF4">    </span><span style="color: #4C566A">//jeśli jest obiektem to iterujemy po każdym property  </span>
<span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">for</span><span style="color: #D8DEE9FF"> (</span><span style="color: #D8DEE9">key</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">in</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">child</span><span style="color: #D8DEE9FF">) </span><span style="color: #ECEFF4">{</span>
<span style="color: #D8DEE9FF">        </span><span style="color: #D8DEE9">value</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">child</span><span style="color: #D8DEE9FF">[</span><span style="color: #D8DEE9">key</span><span style="color: #D8DEE9FF">]</span>
<span style="color: #ECEFF4">        </span><span style="color: #4C566A">//jeśli wartość dla key jest obiektem to wykonujemy rekurencyjną kopie  </span>
<span style="color: #D8DEE9FF">        </span><span style="color: #81A1C1">if</span><span style="color: #D8DEE9FF"> (</span><span style="color: #D8DEE9">value</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">!==</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">null</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">&&</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">typeof</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">value</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">===</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">object</span><span style="color: #ECEFF4">"</span><span style="color: #D8DEE9FF">) </span><span style="color: #ECEFF4">{</span>
<span style="color: #D8DEE9FF">            </span><span style="color: #D8DEE9">parent</span><span style="color: #D8DEE9FF">[</span><span style="color: #D8DEE9">key</span><span style="color: #D8DEE9FF">] </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">deepCopyFunc</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">value</span><span style="color: #D8DEE9FF">)</span>
<span style="color: #D8DEE9FF">        </span><span style="color: #ECEFF4">}</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">else</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span>
<span style="color: #D8DEE9FF">            </span><span style="color: #D8DEE9">parent</span><span style="color: #D8DEE9FF">[</span><span style="color: #D8DEE9">key</span><span style="color: #D8DEE9FF">] </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">value</span>
<span style="color: #D8DEE9FF">        </span><span style="color: #ECEFF4">}</span>
<span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">}</span>
<span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">return</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">parent</span>
<span style="color: #ECEFF4">}</span>

<span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">originalArray</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> [</span><span style="color: #B48EAD">37</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">3700</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span>
<span style="color: #D8DEE9FF">    </span><span style="color: #88C0D0">hello</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">world</span><span style="color: #ECEFF4">"</span>
<span style="color: #ECEFF4">}</span><span style="color: #D8DEE9FF">]</span></code></pre>
<p>Myślę, że artykuł okazał się pomocny, a moje objaśnienia niezbyt trudne. Jeśli zauważysz gdzieś błąd, proszę, napisz do mnie. Zależy mi, by mój blog był rzetelnym źródłem informacji, więc z chęcią przyjmuję krytykę.</p>
</div><footer><div class="tags are-medium"><a href="/tag/javascript/" class="tag is-dark is-rounded is-normal">
        javascript
      </a><a href="/tag/programowanie/" class="tag is-dark is-rounded is-normal">
        programowanie
      </a></div><hr><div class="card"><div class="card-content"><div class="media"><div class="media-left"><figure class="image is-48x48"><a href="/author/Julia/"><img alt="Julia" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 460 460' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-b9f4515d9488d627c3fb002886767c5f'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-b9f4515d9488d627c3fb002886767c5f)' width='460' height='460' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABAAEADASIAAhEBAxEB/8QAGwAAAwADAQEAAAAAAAAAAAAABQYHAwQIAAL/xAAxEAABAwMCAwcEAgIDAAAAAAABAgMEAAURBiESMVEHEyJBYYGhFEJxwTLRYmORseH/xAAZAQEAAwEBAAAAAAAAAAAAAAACAQMEAAX/xAAfEQACAgMBAAMBAAAAAAAAAAAAAQIRAxIhMQQTQTL/2gAMAwEAAhEDEQA/AIYmQlCg0/hQI98VTtNWeJa9Ps6jvLKZCHiU2yAsEJkqHNxf%2btJ8vM7cqm2n4S75fYEGK2FzJTqY7ac7Eq2z%2bBz9q6W7VtIM2uw6dUZYU3BZbgtsobwFJSCVL57Zx81HkdhVtJRJHcUXK/yVzrtJW%2bpOyEnZtsY/ilI2SAOlBIemZ17urcG2sKfkOHPolPUnyFUOa01EsSnnuENobyfU8yP1TNoW7tWCG0W4iJKJoCn5CElLgOMgAHmkdNutUKTbtm36VVJCA92LXSOEuKnxC4NyhAVt%2bDWOGlcCYu2SRiS0nckYKh19au86Q042HUqAQoZBNQrtAnhrWcJwcPhThZ/xJx%2b6cZOyvJijo2kZ3kZpfv6Gfp8PNlxQytI4OLGPP5ovKvEFoEd93ih5Nji%2baBzL2mQsNNMKCVkJ4lH9U5zWr6ZseKTatcDXYalhztUsicJHCXFgkfcG1EVbu2d762FGjs4V3QcVt%2bAP7rlTTUyXDvMSTb31sS2nApt1B3Sev/FdAAzFtSlTXu%2bBSpbZI3CCkEA9anPNa0L40G57fiNSzacVq%2b9u22QVJt8JtLj/AA/cok4T74%2bKb4fZ9bmL6mWghoo4cpQOEkJGADjyodoWcI911C1DKfqHyytPnySQdqcpUmK0wUuynYklQxxKwlftkEVnj4eg7sl3bjdpkC7223WkLabW0XHFNpBPPGwNR1c1d0uCzIkGQpthZ41ICVc8YNVW6Xd256zULq7FkwmkqbQpOCOEjO%2beZqP3SZGb1ZeFQUJRGKS2gI2AwP7pR6DNHVI3rhE7lqC7HWt8SGySnHI4HT8/Fa8dotoaU9lKkKwri8sHzrJZXZDaIkmP3aVoy2CrfOc1sriPJYcKGw%2bpZLnCBtueR6UZ0/AY9l/QB00guTkuD7SAB610PcXQ1YVqTkqTFCRn0GP1UR0VAdeeSttpxTbZClFKTy5kk%2bVWSQoGxKceI4e64Vem/wD7U5pWyPjRqNgTSGoI1n7TAJ7iW2JKQ3xqOACQCM%2b9VLWqm5cBaQ6jgCSTkAjH4Ncy60IkS4bze/etJB9SDw0HuGo7szDMNm4yg3jhKe8JAHTeuiuUi15dZbP8GGdcIlpflsIWlyU6S2gJPhSDzI6Uq2%2b3OutypJyU5PiI51p2SI69PQ4/lWckqVvmnqL3Soj0dvG4wal1HgLeZ7PwM9nDcWTYS2402p9p3JJSM9RRbWj0qPpee5blBDyEcWyQcJz4se2aULUJdkdZfjDvARh1sH%2bac749RTv30a82p9LS8tvtqQoeacjGCOtX45KSox5YSi7ZVVwIbdrmWyDEZj90kgsNoAGByUKRrikKslwi4wVJUkehKdvkVSNYMLDbd4tuRIQPEB9yfWpZFnCe/PB2BQHRtt57e1Z8vptw9RIXOORbwV542nDj33NBLvG4JqFDHC8gLGPLyP8A1VBataWrJcJa8BsPlQPpnFBdY25LLsVKE%2bIt8YPQE5/uuhLpGSFo8xCSm0MSGgMqQPg4r4tgUu6st7gOrCd%2bWTtTFpiM27YnEP8A2K29ASCP3WxcNP8AC4y61ukLzkemDQb6WxXEHbRp16aHIaGCZDKivPIoxzz70OuVqftUn6qGChY2daO2faqTAjLnx2Z7ckRri0yEqWT4V4JHi69KCa2uKLnHSJcFyHdMY7wnhZWB55O%2bPmk%2bdQPeM//Z' /%3e%3c/svg%3e" width="460" data-src="/assets/static/avatarLg.8041d15.01ff6f6d4c6e7f76afdf60e4a51709fb.jpg" data-srcset="/assets/static/avatarLg.8041d15.01ff6f6d4c6e7f76afdf60e4a51709fb.jpg 460w" data-sizes="(max-width: 460px) 100vw, 460px" class="is-rounded g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/avatarLg.8041d15.01ff6f6d4c6e7f76afdf60e4a51709fb.jpg" class="is-rounded g-image g-image--loaded" width="460" alt="Julia"></noscript></a></figure></div><div class="media-content"><p class="title is-4"><a href="/author/Julia/">
            Julia</a></p><p class="subtitle is-6">julia.anna.glaszka@interia.pl</p></div></div><div class="content"><p> Pasjonuję się IT, ekonomią i muzyką. 
    Od roku siedzę z tyłu, bawiąc się backendem, systemami i infrastrukturą - głównie przez to, 
    że strasznie podobaja mi się idea mikroserwisów i chciałabym umieć zaprojektować wydajną architekturę na potrzeby różnych case'ów biznesowych.
    Moim ulubionym językiem jest Java i w niej pracuję na codzień, umiem też kodzić w js, trochę w kotlinie, groovym, golangu (i w paru innych językach). </p></div></div><footer class="card-footer"><a href="/author/Julia/" class="card-footer-item">
            See all posts by Julia →</a></footer></div></footer></div></div></div><footer class="footer has-background-black p-t-xl"><div class="container"><div class="columns"><div class="column has-text-left"><a href="#" class="title is-4 has-text-grey">Autodydaktycznie Blog</a><br><p class="is-family-monospace	pt-5"> 
            Wynalazca to człowiek, który pyta wszechświat: &quot;Dlaczego?&quot; 
            i nie pozwala,
            by cokolwiek stanęło między odpowiedzią 
            a jego umysłem. ~ &quot;Atlas Shrugged&quot;, Ayn Rand</p><p class="pt-5"><a href="/author/Julia">O Autorce</a></p><p class="pt-1"><a href="https://www.linkedin.com/in/julia-glaszka/" target="_blank" rel="noopener" class="mt-5">LinkedIn</a></p></div><div class="column has-text-centered has-text-right-tablet"><p class="subtitle is-5"><span class="copyleft">©</span> evilghostgirl</p></div></div></div></footer></div>
    <script src="/assets/js/app.1910c616.js" defer></script><script src="/assets/js/page--src--templates--post-vue.54468a1c.js" defer></script>
  </body>
</html>
